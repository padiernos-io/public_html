!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.responsiveTable=t())}(self,()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";i.d(o,{default:()=>c});var e=i("ckeditor5/src/core.js");var t=i("ckeditor5/src/ui.js");class n extends t.View{constructor(e){super(e),this.rowsInputView=this._createInputNumber("Rows",3),this.columnsInputView=this._createInputNumber("Columns",2),this.balloonLabelView=new t.FormHeaderView(e,{label:this.t("Table properties")}),this.balloonLabelView.text="Table Properties",this.headersLabelView=new t.View,this.headersLabelView.setTemplate({tag:"span",attributes:{class:["ck","ck-span-label"]},children:[{text:"Table Headers"}]}),this.headersDropdownView=this._createDropdown("Headers"),this.captionInputView=this._createInputText("Caption"),this.captionVisibleInputView=this._createSwitch("Caption Visible?"),this.saveButtonView=this._createButton("Save",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.972 16.615a1 1 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a1 1 0 0 1-.745.292"/></svg>',"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414z"/></svg>',"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.childViews=this.createCollection([this.balloonLabelView,this.rowsInputView,this.columnsInputView,this.headersLabelView,this.headersDropdownView,this.captionInputView,this.captionVisibleInputView,this.saveButtonView,this.cancelButtonView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-wildrose-form"],tabindex:"-1"},children:this.childViews})}render(){super.render(),(0,t.submitHandler)({view:this})}focus(){this.childViews.get(1).focus()}_createInputNumber(e,i){const o=new t.LabeledFieldView(this.locale,t.createLabeledInputNumber);return o.label=e,o.fieldView.value=i,o}_createInputText(e){const i=new t.LabeledFieldView(this.locale,t.createLabeledInputText);return i.label=e,i.placeholder=e,i}_createDropdown(e){const i=new t.ToolbarSeparatorView;const o=function(){const e=new t.ButtonView;return e.set({label:"First Row",withText:!0,isOn:!0}),e}(),n=function(){const e=new t.ButtonView;return e.set({label:"Both",withText:!0}),e}(),s=[o,i,n],r=new t.ToolbarView(this.locale,t.createLabeledInputText,{header:"first"});return r.label=e,r.header="first",s.forEach(e=>r.items.add(e)),r.render(),o.on("execute",()=>{o.set({isOn:!0}),n.set({isOn:!1}),r.header="first"}),n.on("execute",()=>{o.set({isOn:!1}),n.set({isOn:!0}),r.header="both"}),r}_createSwitch(e){const i=new t.SwitchButtonView(this.locale);return i.set({label:e,withText:!0,isOn:!1}),i.render(),i.on("execute",()=>{i.isOn=!i.isOn}),i}_createButton(e,i,o){const n=new t.ButtonView;return n.set({label:e,icon:i,tooltip:!0,class:o}),n}}class s extends e.Command{refresh(){const e=this.editor,t=this._getSelectionAffectedTable(e.model.document.selection);this.isEnabled=t;const i=this._getCaptionFromTableModelElement(t),o=this.editor.editing.mapper.toViewElement(i);o?o.hasClass("hide-caption")?this.value=!1:this.value=!0:this.value=!1}execute(){const e=this._getSelectionAffectedTable(this.editor.model.document.selection),t=this._getCaptionFromTableModelElement(e),i=this.editor.editing.mapper.toViewElement(t),o=this.editor.editing.view;return i?(o.scrollToTheSelection(),this.editor.model.change(e=>{i.hasClass("hide-caption")?(e.removeAttribute("hideCaption",t),this.value=!1):(e.setAttribute("hideCaption","hide-caption",t),this.value=!0)})):this.editor.model.change(t=>{const i=this.editor.model,o=t.createElement("caption");i.insertContent(o,e,"end"),t.setSelection(o,"in"),this.value=!0}),this.editor.editing.view.focus(),o}_getSelectionAffectedTable(e){const t=e.getSelectedElement();return t&&t.is("element","table")?t:e.getFirstPosition().findAncestor("table")}_getCaptionFromTableModelElement(e){if(e)for(const t of e.getChildren())if(t.is("element","caption"))return t;return null}}const r="hideCaption";class a extends e.Plugin{init(){const e=this.editor;e.model.schema.extend("caption",{allowAttributes:r}),e.conversion.attributeToAttribute({model:{key:r},view:{key:"class",value:["hide-caption"]}}),e.model.schema.extend("tableCell",{allowAttributes:["setScopeAttr"]}),e.conversion.attributeToAttribute({model:{name:"tableCell",key:"setScopeAttr"},view:{name:"th",key:"scope"}}),e.conversion.attributeToAttribute({model:{name:"tableCell",key:"setScopeAttr"},view:{name:"td",key:"scope"}}),e.commands.add("toggleCustomTableCaptionCommand",new s(e));const i=e.t;e.ui.componentFactory.add("toggleCustomTableCaption",o=>{const n=e.commands.get("toggleCustomTableCaptionCommand"),s=new t.ButtonView(o);return s.set({icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2"/><path fill-opacity=".6" d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492z"/></svg>',tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(n,"value","isEnabled"),s.bind("label").to(n,"value",e=>i(e?"Toggle caption off":"Toggle caption on")),this.listenTo(s,"execute",()=>{e.execute("toggleCustomTableCaptionCommand")}),s}),this._balloon=this.editor.plugins.get(t.ContextualBalloon),this.formView=this._createFormView(),e.ui.componentFactory.add("customTable",e=>{const i=new t.ButtonView(e);return i.label="Responsive Table",i.tooltip=!0,i.icon='<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n<svg xmlns="http://www.w3.org/2000/svg"\n     width="1080" height="1080" viewBox="0 0 1080 1080" xml:space="preserve">\n<rect x="0" y="0" width="100%" height="100%" fill="transparent"></rect>\n<g transform="matrix(1 0 0 1 540 540)" id="aa1a14c1-9b48-4f2c-8791-02e2241e357b"  >\n</g>\n<g transform="matrix(1 0 0 1 540 540)" id="6d7fd908-7f8a-49db-bb57-dd00d792d2ea"  >\n<rect style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1; visibility: hidden;" vector-effect="non-scaling-stroke"  x="-540" y="-540" rx="0" ry="0" width="1080" height="1080" />\n</g>\n<g transform="matrix(45.02 0 0 45.02 406.66 695.35)"  >\n<path style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-10, -10.5)" d="M 3 6 L 3 9 L 7 9 L 7 6 L 3 6 z M 3 10 L 3 13 L 7 13 L 7 10 L 3 10 z M 3 14 L 3 17 L 7 17 L 7 14 L 3 14 z M 8 17 L 12 17 L 12 14 L 8 14 L 8 17 z M 13 17 L 17 17 L 17 14 L 13 14 L 13 17 z M 17 13 L 17 10 L 13 10 L 13 13 L 17 13 z M 17 9 L 17 6 L 13 6 L 13 9 L 17 9 z M 18.5 17 C 18.5 17.82842712474619 17.82842712474619 18.5 17 18.5 L 3 18.5 C 2.1715728752538097 18.5 1.5 17.82842712474619 1.5 17 L 1.5 4 C 1.722 3.137 2.568 2.5 3.5 2.5 L 16.5 2.5 C 17.432 2.5 18.278 3.137 18.5 4 L 18.5 17 z M 12 13 L 12 10 L 8 10 L 8 13 L 12 13 z M 12 9 L 12 6 L 8 6 L 8 9 L 12 9 z" stroke-linecap="round" />\n</g>\n<g transform="matrix(4.52 0 0 4.52 907.88 181.98)"  >\n<path style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-50, -50)" d="M 40.747 13.955 L 59.254000000000005 13.955 C 60.353 13.955 61.242000000000004 14.845 61.242000000000004 15.941 L 61.242000000000004 38.787 L 84.08600000000001 38.787 C 85.18400000000001 38.787 86.07000000000001 39.675 86.07000000000001 40.772999999999996 L 86.07000000000001 59.226 C 86.07000000000001 60.324999999999996 85.183 61.211999999999996 84.08600000000001 61.211999999999996 L 61.242 61.211999999999996 L 61.242 84.05799999999999 C 61.242 85.157 60.352 86.044 59.254 86.044 L 40.747 86.044 C 39.652 86.044 38.762 85.15599999999999 38.762 84.05799999999999 L 38.762 61.213 L 15.915 61.213 C 14.819999999999999 61.213 13.93 60.325 13.93 59.227000000000004 L 13.93 40.773 C 13.93 39.67400000000001 14.82 38.787000000000006 15.915 38.787000000000006 L 38.762 38.787000000000006 L 38.762 15.941 C 38.762 14.845 39.651 13.955 40.747 13.955 z" stroke-linecap="round" />\n</g>\n</svg>\n',this.listenTo(i,"execute",()=>{this._showUI()}),i});let o=e.model.document;this.listenTo(o,"change:data",()=>{const t=o.differ.getChanges();e.model.change(e=>{for(const i of t){if("insert"==i.type&&("tableCell"==i.name||"tableRow"==i.name)){const t=i.position.findAncestor("table");this._setAttribute(t,e)}if("insert"==i.type&&"table"==i.name){const t=i.position.nodeAfter;e.setAttribute("headingRows",1,t),this._setAttribute(t,e)}}})})}_createFormView(){const e=this.editor,i=new n(e.locale);return this.listenTo(i,"submit",()=>{const t=i.rowsInputView.fieldView.element.value,o=i.columnsInputView.fieldView.element.value,n=i.headersDropdownView.header,s=i.captionInputView.fieldView.element.value,a=i.captionVisibleInputView.isOn;if(""===t)i.rowsInputView.errorText="Number of rows must be a number greater than 0.";else if(""===o)i.columnsInputView.errorText="Number of columns must be a number greater than 0.";else if(void 0===n)alert("Please select a Header option.");else if(""===s)i.captionInputView.errorText="Please enter a caption.";else if(s.length>200)i.captionInputView.errorText="The caption length must be down that 200 characters.";else{const i=this.editor.plugins.get("TableUtils");e.model.change(l=>{let c=i.createTable(l,{rows:t,columns:o,headingColumns:"both"===n,headingRows:!0});this._setAttribute(c,l),e.model.insertObject(c,null,null,{findOptimalPosition:"auto"}),l.setSelection(l.createPositionAt(c.getNodeByPath([0,0,0]),0));const d=l.createElement("caption");l.appendText(s,d),a||l.setAttribute(r,"hide-caption",d),e.model.insertContent(d,c,"end"),e.model.schema.extend("table",{allowAttributes:"class"})}),this._hideUI()}}),this.listenTo(i,"cancel",()=>{this._hideUI()}),(0,t.clickOutsideHandler)({emitter:i,activator:()=>this._balloon.visibleView===i,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),i}_showUI(){this._balloon.add({view:this.formView,position:this._getBalloonPositionData(),singleViewMode:!0}),this.formView.focus()}_hideUI(){this._balloon.remove(this.formView),this.formView=this._createFormView(),this.editor.editing.view.focus()}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let i=null;return i=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:i}}_setAttribute(e,t){const i=Array.from(e.getChildren()),o=e.getAttribute("headingRows"),n=e.getAttribute("headingColumns");for(let e=0;e<i.length;++e){let s=Array.from(i[e].getChildren());if(void 0!==o&&e<o)for(let e=0;e<s.length;++e)t.setAttribute("setScopeAttr","col",s[e]);else if(void 0!==n)for(let e=0;e<n;++e)void 0!==s[e]&&t.setAttribute("setScopeAttr","row",s[e])}}}class l extends e.Plugin{static get requires(){return[a]}}const c={CustomTable:l}})(),o=o.default})());